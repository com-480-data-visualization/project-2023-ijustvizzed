<!-- Code from d3-graph-gallery.com -->
<!DOCTYPE html>
<meta charset="utf-8">
<head>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
<script src="https://d3js.org/d3.v6.js"></script>
</head>
<body>


<div class="container">
	<div class="row">
		<div class="col-1"></div>
		<div class="col-10">
			<h1 style="text-align:center">
				The Power of <u><i>Paranoia</i></u>: <br/>
				Why Conspiracy Theories Persist
			</h1>
			<img src="assets/img/alex-jones-sexy.webp" class="img-fluid"/>
			<div class="py-5">
				In today's world, conspiracy theories seem to be more prevalent than ever. From flat earth to QAnon, these theories can be found everywhere from social media to political rallies. Despite the seemingly outlandish nature of these theories, they continue to gain traction among many people. As researchers, we were surprised to find that conspiracy theories are still so popular today. <br/>
				To investigate this phenomenon, we conducted a study using the transcripts of Alex Jones' Infowars podcast. Our findings shed light on the correlation between belief in conspiracy theories and a number of psychological factors, and offer insight into why these theories persist in modern society.
			</div>
		</div>
		<div class="col-1"></div>
	</div>
	<div id="ohwow"></div>
	<div class="row">
		<div class="col-1"></div>
		<div class="col-10">
			<div class="py-5">
				In our recent study analyzing the prevalence of conspiracy theories in popular media, we created a bar plot to showcase the frequency of conspiracy theories discussed on Alex Jones' podcasts. As a controversial figure in the media landscape, Jones has gained notoriety for promoting a variety of conspiracy theories on his show, including those related to politics, technology, and health.
				The bar plot that we created displays the number of times each conspiracy theory was mentioned on Jones' show over a period of several months, with the most frequently discussed theories represented by the tallest bars on the plot. Through our analysis, we found that some of the most commonly discussed conspiracy theories on Jones' show include those related to government surveillance, secret societies, and the so-called "deep state."
				Our plot offers a revealing look at the types of topics that are of most interest to Jones and his listeners, and sheds light on the ways in which conspiracy theories can spread and gain traction in the media. By better understanding the prevalence of conspiracy theories in popular media, we hope to encourage critical thinking and skepticism in our society.
			</div>
		</div>
		<div class="col-1"></div>
	</div>

	<div id="barplot"></div>

	<div id="lineplot"></div>


</div>

<script>

(async function () {
data = await d3.json("assets/data/dataset.json");
console.log(data["matrix"]);

matrix = data["matrix"];

innerRadius = 400
outerRadius = 406
textRadius = 406
width = 840
height = 840

formatValue = x => `${x.toFixed(0) / 10}%`

color = d3.scaleOrdinal(data["labels"], d3.schemeCategory10)


chord = d3.chordDirected()
	.padAngle(12 / innerRadius)
	.sortSubgroups(d3.descending)
	.sortChords(d3.descending)

const chords = chord(matrix);

arc = d3.arc()
	.innerRadius(innerRadius)
	.outerRadius(outerRadius)

ribbon = d3.ribbonArrow()
	.radius(innerRadius - 0.5)
	.padAngle(1 / innerRadius)

console.log(chords.groups);

const textId_id = "mytext";
const textId_href = "#mytext";

var svg = d3.create("svg")
	.attr("id", "chord_diagram")
	.attr("viewBox", [-width / 2, -height / 2, width, height]);

svg.append("path")
		.attr("id", textId_id)
		.attr("fill", "none")
		.attr("d", d3.arc()({outerRadius: textRadius, startAngle: 0, endAngle: 2 * Math.PI}));

var hover_chord = function(event, d) {
	svg = d3.select("#chord_diagram")
	d3.select("#chords").selectAll("path")
		.transition()
		.style("fill", "black")
		.style("fill-opacity", "0.25")
		.style("opacity", "0.25")
	d3.select("#chords").selectAll(".chord_source"+d.index)
		.transition()
		.style("fill", color(data["labels"][d.index]))
		.style("fill-opacity", "0.9")
		.style("opacity", "0.9")
	d3.select("#chords").selectAll(".chord_target"+d.index)
		.transition()
		.style("fill", color(data["labels"][d.index]))
		.style("fill-opacity", "0.9")
		.style("opacity", "0.9")
};


svg.append("g")
		.attr("id", "chords")
		.attr("fill-opacity", 0.25)
	.selectAll("g")
	.data(chords)
	.join("path")
		.attr("class", d => "chord_source"+d.source.index+" chord_target"+d.target.index)
		.attr("d", ribbon)
		.attr("fill", d => color(data["labels"][d.source.index]))
		//.style("mix-blend-mode", "normal")
	.append("title")
		.text(d => `${data["labels"][d.source.index]} believes also in ${data["labels"][d.target.index]} ${formatValue(d.source.value)}`);


svg.append("g")
		.attr("font-family", "sans-serif")
		.attr("font-size", 15)
	.selectAll("g")
	.data(chords.groups)
	.join("g")
		.call(g => g.append("path")
			.attr("d", arc)
			.attr("fill", d => color(data["labels"][d.index]))
			.attr("stroke", "#fff"))
		.call(g => g.append("text")
			.attr("dy", -3)
		.append("textPath")
			.attr("href", textId_href)
			.attr("startOffset", d => d.startAngle * outerRadius)
			.text(d => data["labels"][d.index]))
		.call(g => g.append("title")
			.text(d => `${data["labels"][d.index]}
			believes ${formatValue(d3.sum(matrix[d.index]))}
			is believed ${formatValue(d3.sum(matrix, row => row[d.index]))}`));


arc = d3.arc().innerRadius(0).outerRadius(outerRadius);
pie = d3.pie()(data)

svg.append("g")
	.selectAll("g")
	.data(chords.groups)
	.join("path")
		.attr("fill", (data, i) => { return d3.schemeSet3[i]; })
		.attr("opacity", "0")
		.attr("d", arc)
		.on("mouseover", hover_chord) 



document.getElementById("ohwow").appendChild(svg.node());

// to add interactivity: https://d3-graph-gallery.com/graph/chord_interactive.html




// set the dimensions and margins of the graph
var margin = {top: 20, right: 30, bottom: 40, left: 90},
    width = 1300 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
svg = d3.select("#barplot")
.append("svg")
	.attr("width", width + margin.left + margin.right)
	.attr("height", height + margin.top + margin.bottom)
.append("g")
	.attr("transform",
				"translate(" + margin.left + "," + margin.top + ")");


// Parse the Data
data_barplot = await d3.csv("assets/data/barplot.csv");

// Add X axis
var x = d3.scaleLinear()
	.domain([0, 13000])
	.range([ 0, width]);
svg.append("g")
	.attr("transform", "translate(0," + height + ")")
	.call(d3.axisBottom(x))
	.selectAll("text")
		.attr("transform", "translate(-10,0)rotate(-45)")
		.style("text-anchor", "end");

console.log(data_barplot)

// Y axis
var y = d3.scaleBand()
	.range([ 0, height ])
	.domain(data_barplot.map(function(d) { return d.label; }))
	.padding(.1);
svg.append("g")
	.call(d3.axisLeft(y))

//Bars
svg.selectAll("myRect")
	.data(data_barplot)
	.enter()
	.append("rect")
	.attr("x", x(0) )
	.attr("y", function(d) { return y(d.label); })
	.attr("width", function(d) { return x(d.value); })
	.attr("height", y.bandwidth() )
	.attr("fill", d => color(d.label))





// set the dimensions and margins of the graph
margin = {top: 10, right: 30, bottom: 30, left: 60},
    width = 460 - margin.left - margin.right,
    height = 400 - margin.top - margin.bottom;

// append the svg object to the body of the page
svg = d3.select("#lineplot")
  .append("svg")
    .attr("width", width + margin.left + margin.right)
    .attr("height", height + margin.top + margin.bottom)
  .append("g")
    .attr("transform", `translate(${margin.left},${margin.top})`);

//Read the data
data_lineplot = await d3.csv("assets/data/timeline.csv")

console.log(data_lineplot);

timedata = data_lineplot.map(function(d) { return {date: d3.timeParse("%Y-%m-%d")(d.date), value: d.value }})


console.log(timedata);

// Add X axis --> it is a date format
x = d3.scaleTime()
	.domain(d3.extent(timedata, function(d) { return d.date; }))
	.range([ 0, width ]);
svg.append("g")
	.attr("transform", `translate(0, ${height})`)
	.call(d3.axisBottom(x));

// Add Y axis
y = d3.scaleLinear()
	.domain([0, d3.max(timedata, function(d) { return +d.value; })])
	.range([ height, 0 ]);
svg.append("g")
	.call(d3.axisLeft(y));

// Add the line
svg.append("path")
	.datum(timedata)
	.attr("fill", "none")
	.attr("stroke", "steelblue")
	.attr("stroke-width", 1.5)
	.attr("d", d3.line()
		.x(function(d) { return x(d.date) })
		.y(function(d) { return y(d.value) })
		)


})();
</script>



</body>
